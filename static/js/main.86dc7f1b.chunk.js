(this["webpackJsonpcovid-19-graph"]=this["webpackJsonpcovid-19-graph"]||[]).push([[0],{293:function(e,t,a){e.exports=a(563)},298:function(e,t,a){},299:function(e,t,a){},563:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(9),o=a.n(i),l=(a(298),a(299),a(104)),c=a(105),s=a(113),_=a(112),d=a(565),u=a(568),y=a(570),p=a(572),m=a(573),h=a(574),g=a(575),E=a(116),f=a(40),A=a(86),S=a.n(A),v=a(83),C=a(251),T=a(566),O=a(567),N=a(259),L=a(162),I=a(569),b=a(571),w=d.a.Content,D=v.a.Option,R=function(e){Object(s.a)(a,e);var t=Object(_.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={chart_data:[],analyze_opt:[{label:"Capita Percentage",value:"CAPITA_PERCENTAGE"},{label:"Latest Only",value:"LATEST_ONLY"},{label:"Daily New Case",value:"DAILY_NEW_CASE"},{label:"Death Case",value:"DEATH_CASE"}],selected_analyze_opt:{CAPITA_PERCENTAGE:"FALSE",LATEST_ONLY:"FALSE",DAILY_NEW_CASE:"FALSE",DEATH_CASE:"FALSE"},querying_territory:{},selected_territory:{},selected_capita:"1000",provided_countries:[],provided_states:[],provided_counties:[],displayed_countries:{},displayed_states:{},displayed_counties:{},loading_chart_data:!1},e.REMOTE_HOST_URL="https://covid19-tracking-api.herokuapp.com/api",e.ANALYZE_EP="/case-analyze",e.COUNTRY="/country",e.STATE="/state",e.COUNTY="/county",e.load_provided_countries=function(){S.a.get(e.REMOTE_HOST_URL+e.COUNTRY,{params:e.state.selected_analyze_opt}).then((function(t){console.log("Countries preloaded: ",t.data),e.setState({provided_countries:t.data})}))},e.get_analyze_params=function(){var t=e.state.selected_analyze_opt;return t.territory_id=e.state.querying_territory?e.state.querying_territory.territory_id:[],t.territory_type=e.state.querying_territory?e.state.querying_territory.territory_type:[],t.territory_capita=e.state.querying_territory?e.state.querying_territory.territory_capita:[],console.log("Analyze params ",t),t},e.get_presentable_querrying_ter=function(){var t={},a=[];if(t.territory_id=e.state.querying_territory?e.state.querying_territory.territory_id:[],t.territory_type=e.state.querying_territory?e.state.querying_territory.territory_type:[],t.territory_capita=e.state.querying_territory?e.state.querying_territory.territory_capita:[],t.name=e.state.querying_territory?e.state.querying_territory.name:[],t.territory_id)for(var r=0;r<t.territory_id.length;r++)a.push({territory_id:t.territory_id[r],territory_type:t.territory_type[r],territory_capita:t.territory_capita[r],name:t.name[r]});return console.log("Presentable querrying ter: ",a),a},e.load_chart_data=function(){e.setState({loading_chart_data:!0}),S.a.get(e.REMOTE_HOST_URL+e.ANALYZE_EP,{params:e.get_analyze_params()}).then((function(t){if(e.setState({loading_chart_data:!1}),console.log(t),t.data.length>0){var a=e.convert_res_to_chart_data(t.data);console.log("Chart data ",a),e.setState({chart_data:a})}else e.setState({chart_data:[]})}))},e.on_select_analyze_opt=function(t){console.log("Val is ",t);var a=e.state.selected_analyze_opt;e.setState({selected_analyze_opt:{CAPITA_PERCENTAGE:"FALSE",LATEST_ONLY:"FALSE",DAILY_NEW_CASE:"FALSE",DEATH_CASE:"FALSE"}});var r,n=Object(E.a)(t);try{for(n.s();!(r=n.n()).done;){a[r.value]="TRUE"}}catch(i){n.e(i)}finally{n.f()}console.log(a),e.setState({analyze_selected_options:a}),e.load_chart_data()},e.on_select_country=function(t){console.log("selected country",t),e.update_selected_territory(t,"COUNTRY");var a=e.state.selected_analyze_opt;a.country_id=t,console.log("Select Country PARAMS ",a),S.a.get(e.REMOTE_HOST_URL+e.STATE,{params:a}).then((function(t){console.log("State preloaded: ",t.data),e.setState({provided_states:t.data})}))},e.update_selected_territory=function(t,a){var r;"COUNTRY"===a?r=e.find_territory(t,e.state.provided_countries):"STATE"===a?r=e.find_territory(t,e.state.provided_states):"COUNTY"===a&&(r=e.find_territory(t,e.state.provided_counties)),console.log(r),e.setState({selected_territory:{name:r.name,territory_id:r._id,territory_type:a}}),e.state["COUNTRY"===a?"displayed_countries":"STATE"===a?"displayed_states":"displayed_counties"]={name:r.name,territory_id:r._id,territory_type:a}},e.find_territory=function(e,t){var a,r=Object(E.a)(t);try{for(r.s();!(a=r.n()).done;){var n=a.value;if(n._id===e)return n}}catch(i){r.e(i)}finally{r.f()}},e.on_select_state=function(t){e.update_selected_territory(t,"STATE");var a=e.state.selected_analyze_opt;a.state_id=t,console.log("Select State PARAMS ",a),S.a.get(e.REMOTE_HOST_URL+e.COUNTY,{params:a}).then((function(t){console.log("County preloaded: ",t.data),e.setState({provided_counties:t.data})}))},e.on_select_county=function(t){e.update_selected_territory(t,"COUNTY")},e.on_input_caputa=function(t){e.setState({selected_capita:t})},e.add_new_querrying_ter=function(){var t=e.state.querying_territory;t.territory_id?t.territory_id.push(e.state.selected_territory.territory_id):t.territory_id=[e.state.selected_territory.territory_id],t.territory_type?t.territory_type.push(e.state.selected_territory.territory_type):t.territory_type=[e.state.selected_territory.territory_type],t.territory_capita?t.territory_capita.push(e.state.selected_capita):t.territory_capita=[e.state.selected_capita],t.name?t.name.push(e.state.selected_territory.name):t.name=[e.state.selected_territory.name],e.load_chart_data(),e.clear_selecter(),e.clear_display_ter(),e.get_presentable_querrying_ter(),console.log("Clearing display: ",e.state)},e.find_ter_name=function(t){if(e.state.querying_territory.territory_id)for(var a=0;a<e.state.querying_territory.territory_id.length;a++)if(e.state.querying_territory.territory_id[a]===t)return e.state.querying_territory.name[a]},e.convert_res_to_chart_data=function(t){for(var a=[],r=0,n=Object.keys(t[0].case);r<n.length;r++){var i=n[r],o={};o.name=i;var l,c=Object(E.a)(t);try{for(c.s();!(l=c.n()).done;){var s=l.value;o[s.territory_type+" "+e.find_ter_name(s.territory_id)]=parseInt(s.case[i])}}catch(_){c.e(_)}finally{c.f()}a.push(o)}return console.log(a),a},e.clear_selecter=function(){e.setState({selected_territory:{},selected_capita:"1000"})},e.clear_display_ter=function(){e.setState({displayed_countries:{},displayed_states:{},displayed_counties:{}})},e.load_chart_ui=function(){return e.state.loading_chart_data?n.a.createElement("div",null,n.a.createElement(C.a,{tip:"Loading chart data"})):n.a.createElement(f.d,{width:1300,height:800,data:e.state.chart_data,margin:{top:50,right:50,left:100,bottom:20}},n.a.createElement(f.a,{strokeDasharray:"3 3"}),n.a.createElement(f.f,{dataKey:"name"}),n.a.createElement(f.g,null),n.a.createElement(f.e,null),e.get_presentable_querrying_ter().map((function(e){return n.a.createElement(f.c,{type:"monotone",dataKey:e.territory_type+" "+e.name,stroke:"#8884d8",activeDot:{r:8}})})),n.a.createElement(f.b,null))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.load_provided_countries(),this.load_chart_data()}},{key:"render",value:function(){return n.a.createElement(w,{className:"site-layout-background",style:{margin:"24px 16px",padding:24,minHeight:280}},"Querrying territory:",n.a.createElement(T.a,{itemLayout:"horizontal",dataSource:this.get_presentable_querrying_ter(),renderItem:function(e){return n.a.createElement(T.a.Item,null,n.a.createElement(T.a.Item.Meta,{title:e.name,description:e.territory_type+". Capita: "+e.territory_capita}))}}),"Country:",n.a.createElement(v.a,{showSearch:!0,style:{width:200},placeholder:"Select a country",optionFilterProp:"children",onChange:this.on_select_country,value:this.state.displayed_countries.name,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.provided_countries.map((function(e){return n.a.createElement(D,{value:e._id},e.name)}))),"State:",n.a.createElement(v.a,{showSearch:!0,style:{width:200},placeholder:"Select a state",optionFilterProp:"children",onChange:this.on_select_state,value:this.state.displayed_states.name,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.provided_states.map((function(e){return n.a.createElement(D,{value:e._id},e.name)}))),"County:",n.a.createElement(v.a,{showSearch:!0,style:{width:200},placeholder:"Select a county",optionFilterProp:"children",onChange:this.on_select_county,value:this.state.displayed_counties.name,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.provided_counties.map((function(e){return n.a.createElement(D,{value:e._id},e.name)}))),n.a.createElement(O.a,{size:"large",defaultValue:"1000",placeholder:"Input capita",prefix:n.a.createElement(y.a,null),onChange:this.on_input_caputa}),n.a.createElement(N.a,{title:"search"},n.a.createElement(L.a,{type:"primary",shape:"circle",icon:n.a.createElement(b.a,null),onClick:this.add_new_querrying_ter})),n.a.createElement("br",null),n.a.createElement(I.a.Group,{options:this.state.analyze_opt,onChange:this.on_select_analyze_opt}),n.a.createElement("br",null),this.load_chart_ui())}}]),a}(r.PureComponent),Y=d.a.Header,q=d.a.Sider,k=d.a.Content,U=d.a.Footer,z=function(e){Object(s.a)(a,e);var t=Object(_.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={collapsed:!1,menu_item:"DAILY_CASE"},e.toggle=function(){e.setState({collapsed:!e.state.collapsed})},e.switch_menu_item=function(t){e.MENU_ITEMS.includes(t)?e.setState({menu_item:t}):console.log("Invalid key option: ",t)},e.MENU_ITEMS=["DAILY_CASE","ANALYZE","DATA_SOURCE"],e.get_menu_item_title=function(e){switch(e){case"DAILY_CASE":return"Daily Case";case"ANALYZE":return"Analyze";case"DATA_SOURCE":return"Data Source";default:console.log("Invalid key option WARNING.")}},e.get_menu_item_page_header=function(e){switch(e){case"DAILY_CASE":return"Daily cases of COVID-19";case"ANALYZE":return"Analyze COVID-19 Data";case"DATA_SOURCE":return"Data Source and Credit";default:console.log("Invalid key option WARNING.")}},e.get_menu_item_page=function(e){switch(e){case"DAILY_CASE":return n.a.createElement(R,null);case"ANALYZE":return"Analyze COVID-19 Data";case"DATA_SOURCE":return"Data Source and Credit";default:console.log("Invalid key option WARNING.")}},e.get_menu_item_icon=function(e){switch(e){case"DAILY_CASE":return n.a.createElement(y.a,null);case"ANALYZE":return n.a.createElement(p.a,null);case"DATA_SOURCE":return n.a.createElement(m.a,null);default:console.log("Invalid key option WARNING.")}},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement(d.a,null,n.a.createElement(q,{trigger:null,collapsible:!0,collapsed:this.state.collapsed},n.a.createElement("div",{className:"logo"}),n.a.createElement(u.a,{theme:"dark",mode:"inline",defaultSelectedKeys:[this.state.menu_item]},this.MENU_ITEMS.map((function(t){return n.a.createElement(u.a.Item,{key:t,onClick:function(){return e.switch_menu_item(t)}},e.get_menu_item_icon(t),n.a.createElement("span",null,e.get_menu_item_title(t)))})))),n.a.createElement(d.a,{className:"site-layout"},n.a.createElement(Y,{className:"site-layout-background",style:{padding:0}},n.a.createElement(this.state.collapsed?h.a:g.a,{className:"trigger",onClick:this.toggle}),this.get_menu_item_page_header(this.state.menu_item)),n.a.createElement(k,{className:"site-layout-background",style:{margin:"24px 16px",padding:24,minHeight:280}},this.get_menu_item_page(this.state.menu_item)),n.a.createElement(U,{style:{textAlign:"center"}},"Created by Minh Nguyen")))}}]),a}(n.a.Component);var M=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(z,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[293,1,2]]]);
//# sourceMappingURL=main.86dc7f1b.chunk.js.map