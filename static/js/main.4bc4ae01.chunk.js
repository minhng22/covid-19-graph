(this["webpackJsonpcovid-19-graph"]=this["webpackJsonpcovid-19-graph"]||[]).push([[0],{295:function(e,t,a){e.exports=a(568)},300:function(e,t,a){},301:function(e,t,a){},568:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(9),o=a.n(i),l=(a(300),a(301),a(109)),c=a(110),s=a(119),_=a(118),d=a(572),u=a(577),y=a(573),p=a(574),m=a(580),E=a(582),g=a(583),f=a(584),h=a(585),A=a(586),S=a(50),v=a(31),C=a(90),T=a.n(C),O=a(87),L=a(255),N=a(575),D=a(166),I=a(576),R=a(263),Y=a(578),b=a(579),P=a(581),w=d.a.Content,q=O.a.Option,U=function(e){Object(s.a)(a,e);var t=Object(_.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).clear_state=function(){r.setState({chart_data:[],analyze_opt:[{label:"Capita Percentage",value:"CAPITA_PERCENTAGE"},{label:"Latest Only",value:"LATEST_ONLY"},{label:"Daily New Case",value:"DAILY_NEW_CASE"}],selected_analyze_opt:{CAPITA_PERCENTAGE:"FALSE",LATEST_ONLY:"FALSE",DAILY_NEW_CASE:"FALSE"},querying_territory:{},selected_territory:{},selected_capita:"1000",provided_countries:[],provided_states:[],provided_counties:[],displayed_countries:{},displayed_states:{},displayed_counties:{},loading_chart_data:!1})},r.REMOTE_HOST_URL="https://covid19-tracking-api.herokuapp.com/api",r.ANALYZE_EP="/case-analyze",r.COUNTRY="/country",r.STATE="/state",r.COUNTY="/county",r.TER_PROPERTY=["territory_id","territory_type","territory_capita"],r.TER_PROPERTY_UI=["territory_id","territory_type","territory_capita","name"],r.componentDidMount=function(){console.log("COMPONENT LOADED",r.props),r.load_provided_countries(),r.load_chart_data()},r.get_selected_analyze_opt=function(){console.log(r.props);var e=r.state.selected_analyze_opt;return e.DEATH_CASE="DEATH"===r.props.medica?"TRUE":"FALSE",e},r.load_provided_countries=function(){T.a.get(r.REMOTE_HOST_URL+r.COUNTRY,{params:r.get_selected_analyze_opt()}).then((function(e){console.log("Countries preloaded: ",e.data),r.setState({provided_countries:e.data})}))},r.get_analyze_params=function(){var e,t=r.get_selected_analyze_opt(),a=Object(S.a)(r.TER_PROPERTY);try{for(a.s();!(e=a.n()).done;){var n=e.value;t[n]=r.state.querying_territory?r.state.querying_territory[n]:[]}}catch(i){a.e(i)}finally{a.f()}return console.log("Analyze params ",t),t},r.get_presentable_querrying_ter=function(){var e=[];if(r.state.querying_territory.territory_id)for(var t=0;t<r.state.querying_territory.territory_id.length;t++)e.push(r.create_obj_from_ter_ui_index(t,r.state.querying_territory));return console.log("Presentable querrying ter: ",e),e},r.load_chart_data=function(){r.setState({loading_chart_data:!0}),T.a.get(r.REMOTE_HOST_URL+r.ANALYZE_EP,{params:r.get_analyze_params()}).then((function(e){if(r.setState({loading_chart_data:!1}),console.log(e),e.data.length>0){var t=r.convert_res_to_chart_data(e.data);console.log("Chart data ",t),r.setState({chart_data:t})}else r.setState({chart_data:[]})}))},r.on_select_analyze_opt=function(e){console.log("Val is ",e);var t=r.state.selected_analyze_opt;r.setState({selected_analyze_opt:{CAPITA_PERCENTAGE:"FALSE",LATEST_ONLY:"FALSE",DAILY_NEW_CASE:"FALSE"}});var a,n=Object(S.a)(e);try{for(n.s();!(a=n.n()).done;){t[a.value]="TRUE"}}catch(i){n.e(i)}finally{n.f()}console.log("New select analyze opt: ",t),r.setState({selected_analyze_opt:t}),r.load_chart_data()},r.on_select_country=function(e){console.log("selected country",e),r.update_selected_territory(e,"COUNTRY");var t=r.get_selected_analyze_opt();t.country_id=e,console.log("Select Country PARAMS ",t),T.a.get(r.REMOTE_HOST_URL+r.STATE,{params:t}).then((function(e){console.log("State preloaded: ",e.data),r.setState({provided_states:e.data})}))},r.update_selected_territory=function(e,t){var a;"COUNTRY"===t?a=r.find_territory(e,r.state.provided_countries):"STATE"===t?a=r.find_territory(e,r.state.provided_states):"COUNTY"===t&&(a=r.find_territory(e,r.state.provided_counties)),console.log(a),r.setState({selected_territory:{name:a.name,territory_id:a._id,territory_type:t}}),r.state["COUNTRY"===t?"displayed_countries":"STATE"===t?"displayed_states":"displayed_counties"]={name:a.name,territory_id:a._id,territory_type:t}},r.find_territory=function(e,t){var a,r=Object(S.a)(t);try{for(r.s();!(a=r.n()).done;){var n=a.value;if(n._id===e)return n}}catch(i){r.e(i)}finally{r.f()}},r.on_select_state=function(e){r.update_selected_territory(e,"STATE");var t=r.get_selected_analyze_opt();t.state_id=e,console.log("Select State PARAMS ",t),T.a.get(r.REMOTE_HOST_URL+r.COUNTY,{params:t}).then((function(e){console.log("County preloaded: ",e.data),r.setState({provided_counties:e.data})}))},r.on_select_county=function(e){r.update_selected_territory(e,"COUNTY")},r.on_input_caputa=function(e){r.setState({selected_capita:e})},r.add_new_querrying_ter=function(){var e=r.state.querying_territory;e.territory_id?e.territory_id.push(r.state.selected_territory.territory_id):e.territory_id=[r.state.selected_territory.territory_id],e.territory_type?e.territory_type.push(r.state.selected_territory.territory_type):e.territory_type=[r.state.selected_territory.territory_type],e.territory_capita?e.territory_capita.push(r.state.selected_capita):e.territory_capita=[r.state.selected_capita],e.name?e.name.push(r.state.selected_territory.name):e.name=[r.state.selected_territory.name],r.load_chart_data(),r.clear_selecter(),r.clear_display_ter(),r.get_presentable_querrying_ter(),console.log("Clearing display: ",r.state)},r.find_ter_name=function(e){if(r.state.querying_territory.territory_id)for(var t=0;t<r.state.querying_territory.territory_id.length;t++)if(r.state.querying_territory.territory_id[t]===e)return r.state.querying_territory.name[t]},r.convert_res_to_chart_data=function(e){for(var t=[],a=0,n=Object.keys(e[0].case);a<n.length;a++){var i=n[a],o={};o.name=i;var l,c=Object(S.a)(e);try{for(c.s();!(l=c.n()).done;){var s=l.value;o[s.territory_type+" "+r.find_ter_name(s.territory_id)]=parseInt(s.case[i])}}catch(_){c.e(_)}finally{c.f()}t.push(o)}return console.log(t),t},r.clear_selecter=function(){r.setState({selected_territory:{},selected_capita:"1000"})},r.clear_display_ter=function(){r.setState({displayed_countries:{},displayed_states:{},displayed_counties:{}})},r.load_chart_ui=function(){return r.state.loading_chart_data?n.a.createElement("div",null,n.a.createElement(L.a,{tip:"Loading chart data"})):n.a.createElement(v.e,{width:"100%",aspect:4/3,minHeight:"300px"},n.a.createElement(v.d,{data:r.state.chart_data,margin:50},n.a.createElement(v.a,{strokeDasharray:"3 3"}),n.a.createElement(v.g,{dataKey:"name"}),n.a.createElement(v.h,null),n.a.createElement(v.f,null),r.get_presentable_querrying_ter().map((function(e){return n.a.createElement(v.c,{type:"monotone",dataKey:e.territory_type+" "+e.name,stroke:"#8884d8",activeDot:{r:8}})})),n.a.createElement(v.b,null)))},r.get_info_from_btn=function(e){if(e.target.id){var t=e.target.id.split(" ");return console.log("Editing ",t),t}},r.find_querrying_item=function(e,t){if(r.state.querying_territory.territory_id)for(var a=0;a<r.state.querying_territory.territory_id.length;a++)if(r.state.querying_territory.territory_id[a]===e&&r.state.querying_territory.territory_type[a]===t)return r.create_obj_from_ter_ui_index(a,r.state.querying_territory)},r.create_obj_from_ter_ui_index=function(e,t){var a,n={},i=Object(S.a)(r.TER_PROPERTY_UI);try{for(i.s();!(a=i.n()).done;){var o=a.value;n[o]=t[o][e]}}catch(l){i.e(l)}finally{i.f()}return n},r.delete_querrying_ter=function(e){var t={};console.log("Deleting ",e);var a,n=Object(S.a)(r.TER_PROPERTY_UI);try{for(n.s();!(a=n.n()).done;){var i=a.value,o=r.state.querying_territory[i];console.log("index ",o.indexOf(e[i])),o.splice(o.indexOf(e[i]),1),t[i]=o}}catch(l){n.e(l)}finally{n.f()}console.log("New querrying: ",t),r.setState({querying_territory:t})},r.delete_querrying_ter_ui=function(e){var t=r.get_info_from_btn(e)[0],a=r.get_info_from_btn(e)[1],n=r.find_querrying_item(t,a);r.delete_querrying_ter(n)},console.log("COMPONENT CONSTRUCTED ",r.props),r.state={chart_data:[],analyze_opt:[{label:"Capita Percentage",value:"CAPITA_PERCENTAGE"},{label:"Latest Only",value:"LATEST_ONLY"},{label:"Daily New Case",value:"DAILY_NEW_CASE"}],selected_analyze_opt:{CAPITA_PERCENTAGE:"FALSE",LATEST_ONLY:"FALSE",DAILY_NEW_CASE:"FALSE"},querying_territory:{},selected_territory:{},selected_capita:"1000",provided_countries:[],provided_states:[],provided_counties:[],displayed_countries:{},displayed_states:{},displayed_counties:{},loading_chart_data:!1},r}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement(w,{className:"site-layout-background",style:{margin:"24px 16px",padding:24,minHeight:280}},n.a.createElement(y.a,{class:"territory",gutter:[{xs:8,sm:16,md:24,lg:32},{xs:8,sm:16,md:24,lg:32}],align:"middle"},n.a.createElement(p.a,{span:7},"Querrying territory:",n.a.createElement(N.a,{itemLayout:"horizontal",dataSource:this.get_presentable_querrying_ter(),renderItem:function(t){return n.a.createElement(N.a.Item,null,n.a.createElement(N.a.Item.Meta,{title:t.name,description:t.territory_type+". Capita: "+t.territory_capita}),n.a.createElement(D.a,{id:t.territory_id+" "+t.territory_type,onClick:e.delete_querrying_ter_ui},n.a.createElement(b.a,null)))}})),n.a.createElement(p.a,{span:15},"Select new territory:",n.a.createElement(y.a,{class:"selected-territory",gutter:[{xs:4,sm:8,md:12,lg:16},{xs:4,sm:8,md:12,lg:16}]},n.a.createElement(p.a,{class:"selected-col"},n.a.createElement(O.a,{showSearch:!0,style:{width:200},placeholder:"Select a country",optionFilterProp:"children",onChange:this.on_select_country,value:this.state.displayed_countries.name,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.provided_countries.map((function(e){return n.a.createElement(q,{value:e._id},e.name)})))),n.a.createElement(p.a,{class:"selected-col"},n.a.createElement(O.a,{showSearch:!0,style:{width:200},placeholder:"Select a state",optionFilterProp:"children",onChange:this.on_select_state,value:this.state.displayed_states.name,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.provided_states.map((function(e){return n.a.createElement(q,{value:e._id},e.name)})))),n.a.createElement(p.a,{class:"selected-col"},n.a.createElement(O.a,{showSearch:!0,style:{width:200},placeholder:"Select a county",optionFilterProp:"children",onChange:this.on_select_county,value:this.state.displayed_counties.name,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.provided_counties.map((function(e){return n.a.createElement(q,{value:e._id},e.name)})))),n.a.createElement(p.a,{class:"selected-col"},n.a.createElement(I.a,{defaultValue:"1000",placeholder:"Input capita",prefix:n.a.createElement(m.a,null),onChange:this.on_input_caputa})),n.a.createElement(p.a,{class:"selected-col"},n.a.createElement(R.a,{title:"search"},n.a.createElement(D.a,{type:"primary",shape:"circle",icon:n.a.createElement(P.a,null),onClick:this.add_new_querrying_ter})))),n.a.createElement(y.a,{class:"analyze-option"},n.a.createElement(Y.a.Group,{options:this.state.analyze_opt,onChange:this.on_select_analyze_opt})))),n.a.createElement(y.a,{class:"chart"},this.load_chart_ui()))}}]),a}(r.PureComponent),z=d.a.Header,k=d.a.Sider,x=d.a.Content,M=d.a.Footer,j=function(e){Object(s.a)(a,e);var t=Object(_.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).state={collapsed:!1,menu_item:"DAILY_CASE",menu_page:{}},r.toggle=function(){r.setState({collapsed:!r.state.collapsed})},r.switch_menu_item=function(e){console.log("Switching to ",e),r.MENU_ITEMS.includes(e)?r.setState({menu_item:e}):console.log("Invalid key option: ",e)},r.componentDidMount=function(){r.setState({menu_page:n.a.createElement(U,{medica:"POSITIVE"})})},r.MENU_ITEMS=["DAILY_CASE","DAILY_DEATH_CASE","ANALYZE","DATA_SOURCE"],r.get_menu_item_title=function(e){switch(e){case"DAILY_CASE":return"Daily Case";case"DAILY_DEATH_CASE":return"Daily Death Case";case"ANALYZE":return"Analyze";case"DATA_SOURCE":return"Data Source";default:console.log("Invalid key option WARNING.")}},r.get_menu_item_page_header=function(e){switch(e){case"DAILY_CASE":return"Daily cases of COVID-19";case"DAILY_DEATH_CASE":return"Daily death cases of COVID-19";case"ANALYZE":return"Analyze COVID-19 Data";case"DATA_SOURCE":return"Data Source and Credit";default:console.log("Invalid key option WARNING.")}},r.get_menu_item_icon=function(e){switch(e){case"DAILY_CASE":return n.a.createElement(m.a,null);case"DAILY_DEATH_CASE":return n.a.createElement(E.a,null);case"ANALYZE":return n.a.createElement(g.a,null);case"DATA_SOURCE":return n.a.createElement(f.a,null);default:console.log("Invalid key option WARNING.")}},r}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement(d.a,null,n.a.createElement(k,{trigger:null,collapsible:!0,collapsed:this.state.collapsed},n.a.createElement("div",{className:"logo"}),n.a.createElement(u.a,{theme:"dark",mode:"inline",defaultSelectedKeys:[this.state.menu_item]},this.MENU_ITEMS.map((function(t){return n.a.createElement(u.a.Item,{key:t,onClick:function(){return e.switch_menu_item(t)}},e.get_menu_item_icon(t),n.a.createElement("span",null,e.get_menu_item_title(t)))})))),n.a.createElement(d.a,{className:"site-layout"},n.a.createElement(z,{className:"site-layout-background",style:{padding:"0 24px"}},n.a.createElement(y.a,null,n.a.createElement(p.a,{span:"1"},n.a.createElement(this.state.collapsed?h.a:A.a,{className:"trigger",onClick:this.toggle})),n.a.createElement(p.a,{style:{textAlign:"center"},span:"23"},this.get_menu_item_page_header(this.state.menu_item)))),n.a.createElement(x,{className:"site-layout-background",style:{margin:"24px 16px",padding:24,minHeight:280}},function(){if("DAILY_CASE"===e.state.menu_item)return n.a.createElement(U,{medica:"POSITIVE"})}(),function(){if("DAILY_DEATH_CASE"===e.state.menu_item)return n.a.createElement(U,{medica:"DEATH"})}(),function(){if("ANALYZE"===e.state.menu_item)return n.a.createElement("div",null,"Analyze COVID-19 Data")}(),function(){if("DATA_SOURCE"===e.state.menu_item)return n.a.createElement("div",null,"Data Source and Credit")}()),n.a.createElement(M,{style:{textAlign:"center"}},"Created by Minh Nguyen")))}}]),a}(n.a.Component);var H=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(j,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[295,1,2]]]);
//# sourceMappingURL=main.4bc4ae01.chunk.js.map